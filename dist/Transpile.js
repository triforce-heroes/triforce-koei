import{BufferConsumer as e}from"@triforce-heroes/triforce-core/BufferConsumer";import{fatal as r}from"@triforce-heroes/triforce-core/Console";import{validate as t}from"./utils/validate.js";export function transpile(i){t(i)||r("invalid KOEI file");let n=new e(i),o=[],s=n.readUnsignedInt32(),l=n.readUnsignedInt32(),a=n.skip(8).readUnsignedInt32()/s;if(n.seek(i.length-l),4===a)for(let e=0;e<s;e++)o.push([n.readNullTerminatedString()]);else{let r=new e(i.subarray(16,16+s*a));for(let e=0;e<s;e++)r.skip(4),o.push([n.readNullTerminatedString(),r.read(a-4)])}return o}